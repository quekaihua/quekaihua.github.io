import{d as U,l as b,S as J,p as ne,a8 as D,o,c as f,w as e,a,b as w,A as k,O as S,N as V,a5 as K,aQ as le,aK as oe,aR as se,g as O,Z as Q,h as W,i as I,P as B,B as H,u as L,aS as ce,aT as z,aU as re,a7 as Z,$ as G,J as ue,a9 as de,D as A,aV as ie,aW as _e,ac as F}from"./index-d4259e6b.js";import{E as me,a as pe}from"./el-tab-pane-ea3463fe.js";import{_ as X}from"./ListItem.vue_vue_type_script_setup_true_lang-3a7cda83.js";import"./index-32ec0f81.js";function fe(){function P(){let s=0,t=0,r=0;return document.body&&(t=document.body.scrollTop),document.documentElement&&(r=document.documentElement.scrollTop),s=t-r>0?t:r,s}function c(){let s=0,t=0,r=0;return document.body&&(t=document.body.scrollHeight),document.documentElement&&(r=document.documentElement.scrollHeight),s=t-r>0?t:r,s}function i(){let s=0;return document.compatMode==="CSS1Compat"?s=document.documentElement.clientHeight:s=document.body.clientHeight,s}return{getScrollTop:P,getScrollHeight:c,getWindowHeight:i}}const ve={class:"h-50 overflow-hidden"},ge=U({__name:"AsyncVideoPage",async setup(P){let c,i;const{getScrollTop:s,getScrollHeight:t,getWindowHeight:r}=fe();function $(){console.log("scroll")}const x=K(),u=b(!1),_=b(null),v=b(null),M=async()=>{const l=await ce();_.value=l.data},p=b([]),g=J({id:58100,offset:0}),C=b(""),m=async()=>{let l=await z(g);if(l.code!==200){re("请先登录获取视频数据"),C.value="请先登录获取视频数据";return}p.value.push(...l.datas),v.value=l.hasmore,v.value&&(g.offset+=8,l=await z(g),p.value.push(...l.datas)),console.log(p.value),v.value=l.hasmore},y=le(async()=>{if(v.value){g.offset+=p.value.length;const l=await z(g);p.value.push(...l.datas)}},1e3),h=b(0);ne(()=>{window.addEventListener("scroll",async()=>{const l=window.scrollY-h.value;h.value=window.scrollY,s()+r()>t()-100&&l>0&&y()})}),[c,i]=D(()=>M()),await c,i(),[c,i]=D(()=>m()),await c,i();const N=async l=>{u.value=!1,g.id=l,m()};return(l,T)=>{const R=oe,q=Z,n=se,E=O,Y=G,ee=Q,ae=W,te=I;return o(),f(te,null,{default:e(()=>[a(E,null,{default:e(()=>[a(R,{onClick:T[0]||(T[0]=d=>u.value=!0)},{default:e(()=>[w(" 全部标签 ")]),_:1}),a(n,{modelValue:u.value,"onUpdate:modelValue":T[1]||(T[1]=d=>u.value=d),title:"全部标签",width:"30%"},{default:e(()=>[(o(!0),k(V,null,S(_.value,d=>(o(),f(q,{key:d.id,class:"mr-1",onClick:j=>N(d.id)},{default:e(()=>[w(B(d.name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(ae,null,{default:e(()=>[a(ee,{gutter:10,"on:scroll":$},{default:e(()=>[(o(!0),k(V,null,S(p.value,(d,j)=>(o(),f(Y,{key:j,span:6,style:{"margin-top":"20px",position:"relative"}},{default:e(()=>[H("div",ve,[a(X,{id:d.data.vid,cover:d.data.coverUrl,title:d.data.title,"play-count":d.data.playTime,type:"video",onHandleClick:Te=>L(x).push(`/video/play/${d.data.vid}`)},null,8,["id","cover","title","play-count","onHandleClick"])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}}),ye={class:"mv-box"},he=H("span",null,"地区：",-1),be={key:1,class:"py-20"},ke=U({__name:"AsyncMvPage",async setup(P){let c,i;const s=K(),t=J({type:"全部",area:"全部",order:"上升最快",limit:12,offset:0}),r=[{id:-1,name:"全部"},{id:1,name:"官方版"},{id:2,name:"原生"},{id:3,name:"现场版"},{id:4,name:"网易出品"}],$=[{id:-1,name:"全部"},{id:7,name:"内地"},{id:96,name:"港台"},{id:8,name:"欧美"},{id:16,name:"日本"},{id:0,name:"韩国"}],x=[{id:1,name:"上升最快"},{id:2,name:"最热"},{id:3,name:"最新"}],u=b(null),_=b(0),v=async()=>await ie(t),M=async(C,m)=>{switch(C){case"area":t.area=m;break;case"type":t.type=m;break;case"order":t.order=m;break}const y=await v();u.value=y.data,_.value=y.count},p=([c,i]=D(()=>v()),c=await c,i(),c);u.value=p.data,_.value=p.count;const g=async C=>{t.offset=(C-1)*t.limit;const m=await v();u.value=m.data,_.value=m.count};return(C,m)=>{const y=Z,h=Q,N=O,l=G,T=de,R=W,q=I;return o(),k("div",ye,[a(q,null,{default:e(()=>[a(N,null,{default:e(()=>[a(h,{class:"mb-2"},{default:e(()=>[he,(o(),k(V,null,S($,n=>a(y,{key:n.id,class:A([{"bg-gray-300":t.area===n.name},"ml-3 cursor-pointer"]),onClick:E=>M("area",n.name)},{default:e(()=>[w(B(n.name),1)]),_:2},1032,["class","onClick"])),64))]),_:1}),a(h,{class:"mb-2"},{default:e(()=>[H("span",null,[w("类型："),(o(),k(V,null,S(r,n=>a(y,{key:n.id,class:A([{"bg-gray-300":t.type===n.name},"ml-3 cursor-pointer"]),onClick:E=>M("type",n.name)},{default:e(()=>[w(B(n.name),1)]),_:2},1032,["class","onClick"])),64))])]),_:1}),a(h,{class:"mb-2"},{default:e(()=>[H("span",null,[w("排序："),(o(),k(V,null,S(x,n=>a(y,{key:n.id,class:A([{"bg-gray-300":t.order===n.name},"ml-3 bg-gray cursor-pointer"]),onClick:E=>M("order",n.name)},{default:e(()=>[w(B(n.name),1)]),_:2},1032,["class","onClick"])),64))])]),_:1})]),_:1}),a(R,null,{default:e(()=>[u.value&&u.value.length>0?(o(),f(h,{key:0,gutter:10},{default:e(()=>[(o(!0),k(V,null,S(u.value,(n,E)=>(o(),f(l,{key:E,span:6,style:{"margin-top":"20px",position:"relative"}},{default:e(()=>[a(X,{id:String(n.id),cover:n.cover,title:n.name,"play-count":n.playCount,type:"video",onHandleClick:Y=>L(s).push(`/video/play/${n.id}?type=mv`)},null,8,["id","cover","title","play-count","onHandleClick"])]),_:2},1024))),128))]),_:1})):(o(),k("div",be," 暂无视频 ")),a(h,null,{default:e(()=>[_.value?(o(),f(l,{key:0},{default:e(()=>[a(T,{class:"justify-center",layout:"prev, pager, next","page-size":t.limit,total:_.value,onCurrentChange:g},null,8,["page-size","total"])]),_:1})):ue("",!0)]),_:1})]),_:1})]),_:1})])}}}),Ce=H("div",null," loading... ",-1),we=H("div",null," loading... ",-1),$e=U({__name:"index",setup(P){const c=_e(),i=s=>{c.setMvTab(s.paneName)};return(s,t)=>{const r=me,$=pe,x=W,u=I;return o(),f(u,null,{default:e(()=>[a(x,null,{default:e(()=>[a($,{modelValue:L(c).mvTab,"onUpdate:modelValue":t[0]||(t[0]=_=>L(c).mvTab=_),type:"card",class:"demo-tabs",onTabClick:i},{default:e(()=>[a(r,{lazy:"",label:"MV",name:"mvPage"},{default:e(()=>[(o(),f(F,null,{fallback:e(()=>[Ce]),default:e(()=>[a(ke)]),_:1}))]),_:1}),a(r,{lazy:"",label:"视频",name:"videoPage"},{default:e(()=>[(o(),f(F,null,{fallback:e(()=>[we]),default:e(()=>[a(ge)]),_:1}))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{$e as default};
