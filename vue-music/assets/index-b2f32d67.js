import{d as G,l as i,S as K,m as Q,p as W,n as ee,aJ as ae,o,c as k,w as s,a as t,B as l,b as V,P as _,A as u,u as h,J as f,O as S,N as T,e as te,aX as le,a5 as se,g as ne,ae as oe,af as re,Z as ce,a9 as ue,h as ie,i as de,aY as _e,$ as pe}from"./index-d4259e6b.js";import{a as me,E as ve}from"./el-tab-pane-ea3463fe.js";import{_ as ye}from"./ListItem.vue_vue_type_script_setup_true_lang-3a7cda83.js";import"./index-32ec0f81.js";const he={class:"text-blue-500"},fe={key:0},be={key:0},ge={key:1},we={class:"flex justify-center items-center"},ke={key:2},Ce={style:{display:"flex","align-items":"center"}},xe=["src"],$e={key:3},Ee={style:{display:"flex","align-items":"center"}},Re=["src"],Ve={key:4},Se={style:{display:"flex","align-items":"center"}},Te=["src"],De={style:{display:"flex","align-items":"center"}},Be={style:{display:"flex","align-items":"center"}},Me={key:5},Ne={key:6},Ae=G({__name:"index",setup(Pe){const D=[{type:1,name:"单曲"},{type:10,name:"专辑"},{type:100,name:"歌手"},{type:1e3,name:"歌单"},{type:1004,name:"MV"}],c=i(1),n=i(0),p=i(!0),C=te(),d=K({type:1,offset:0,limit:30,keywords:C.params.keywords}),b=i(null),x=i(null),$=i(null),E=i(null),m=i(null),B=i(null),R=async()=>(await le(d)).result,g=async()=>{p.value=!1;const e=await R();switch(c.value){case 1:{b.value=e.songs,n.value=e.songCount;break}case 10:{x.value=e.albums,n.value=e.albumCount;break}case 100:{$.value=e.artists,n.value=e.artistCount;break}case 1e3:{E.value=e.playlists,n.value=e.playlistCount;break}case 1004:{m.value=e.mvs,n.value=e.mvCount;break}case 1006:{B.value=e.songs,n.value=e.songCount;break}}p.value=!1},M=e=>{d.type=e,d.offset=0,g()},N=e=>{d.offset=(e-1)*d.limit,g()},P=Q(()=>{let e;switch(c.value){case 1:e=`${n.value}首单曲`;break;case 10:e=`${n.value}位歌手`;break;case 100:e=`${n.value}张专辑`;break;case 1e3:e=`${n.value}个歌单`;break;case 1004:e=`${n.value}首MV`;break;case 1006:e=`${n.value}首单曲`;break}return e});W(async()=>{const e=await R();b.value=e.songs,n.value=e.songCount,p.value=!1}),ee(()=>C.params.keywords,async(e,w)=>{d.keywords=e,await g()},{deep:!0});const U=e=>e+1<10?`0${e+1}`:`${e+1}`,{playSong:H}=ae(),v=se(),j=e=>{v.push(`/album/${e.id}`)},q=e=>{v.push(`/singer/${e.id}`)},z=e=>{v.push(`/cd/${e.id}`)};return(e,w)=>{const A=ne,J=ve,F=me,r=oe,y=re,I=pe,L=ce,O=ue,X=ie,Y=de;return o(),k(Y,null,{default:s(()=>[t(A,{class:"flex items-center"},{default:s(()=>[l("h1",null,[V("搜索"),l("span",he,_(d.keywords),1),V("，"),p.value?f("",!0):(o(),u("span",fe,"找到"+_(h(P)),1))])]),_:1}),t(X,null,{default:s(()=>[t(F,{modelValue:c.value,"onUpdate:modelValue":w[0]||(w[0]=a=>c.value=a),type:"card",class:"demo-tabs",onTabChange:M},{default:s(()=>[(o(),u(T,null,S(D,a=>t(J,{key:a.type,label:a.name,name:a.type},null,8,["label","name"])),64))]),_:1},8,["modelValue"]),p.value?(o(),u("div",be," loading... ")):f("",!0),c.value===1?(o(),u("div",ge,[t(y,{data:b.value,style:{width:"100%"},stripe:"",onRowDblclick:h(H)},{default:s(()=>[t(r,{type:"index",label:"",index:U}),t(r,{prop:"name",label:"音乐标题",width:"180"}),t(r,{prop:"artists[0].name",label:"歌手"}),t(r,{prop:"album.name",label:"专辑"}),t(r,null,{default:s(a=>[l("div",we,[l("span",null,_(h(_e)(a.row.duration)),1)])]),_:1})]),_:1},8,["data","onRowDblclick"])])):c.value===10?(o(),u("div",ke,[t(y,{data:x.value,style:{width:"100%"},stripe:"","show-header":!1,onRowDblclick:j},{default:s(()=>[t(r,null,{default:s(a=>[l("div",Ce,[l("img",{class:"h-10 w-10 mr-2",src:a.row.picUrl,alt:""},null,8,xe),l("span",null,_(a.row.name),1)])]),_:1}),t(r,{prop:"artist.name",label:"歌手"})]),_:1},8,["data"])])):c.value===100?(o(),u("div",$e,[t(y,{data:$.value,style:{width:"100%"},stripe:"","show-header":!1,onRowDblclick:q},{default:s(()=>[t(r,{label:""},{default:s(a=>[l("div",Ee,[l("img",{class:"h-10 w-10 mr-2",src:a.row.picUrl,alt:""},null,8,Re),l("span",null,_(a.row.name),1)])]),_:1})]),_:1},8,["data"])])):c.value===1e3?(o(),u("div",Ve,[t(y,{data:E.value,style:{width:"100%"},stripe:"","show-header":!1,onRowDblclick:z},{default:s(()=>[t(r,{label:"图片"},{default:s(a=>[l("div",Se,[l("img",{class:"h-10 w-10 mr-2",src:a.row.coverImgUrl,alt:""},null,8,Te),l("span",null,_(a.row.name),1)])]),_:1}),t(r,null,{default:s(a=>[l("div",De,[l("span",null,_(a.row.trackCount)+"首",1)])]),_:1}),t(r,{prop:"name",label:"名字"},{default:s(a=>[l("div",Be,[l("span",null,"创建者："+_(a.row.creator.nickname),1)])]),_:1})]),_:1},8,["data"])])):c.value===1004?(o(),u("div",Me,[m.value&&m.value.length>0?(o(),k(L,{key:0,gutter:10},{default:s(()=>[(o(!0),u(T,null,S(m.value,(a,Z)=>(o(),k(I,{key:Z,span:6,style:{"margin-top":"20px",position:"relative"}},{default:s(()=>[t(ye,{id:String(a.id),cover:a.cover,title:a.name,"play-count":a.playCount,type:"video",onHandleClick:Ue=>h(v).push(`/video/play/${a.id}?type=mv`)},null,8,["id","cover","title","play-count","onHandleClick"])]),_:2},1024))),128))]),_:1})):f("",!0)])):c.value===1006?(o(),u("div",Ne," 歌词 ")):f("",!0),t(O,{class:"justify-center",layout:"prev, pager, next","page-size":d.limit,total:n.value,onCurrentChange:N},null,8,["page-size","total"])]),_:1})]),_:1})}}});export{Ae as default};
