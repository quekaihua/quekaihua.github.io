import{j as ce,k as Me,l as w,m as z,u as e,n as W,s as $e,p as x,q as Le,t as Ne,v as Te,x as Be,y as de,d as R,z as ve,o as k,A as P,B as A,c as X,w as $,C as G,D as O,F as j,a as L,G as le,H as Pe,I as J,T as re,J as K,K as Ae,L as fe,M as me,N as ee,O as te,P as q,Q as pe,R as He,S as Oe,U as Ve,V as ze,W as De,X as Re,Y as Ue,Z as Fe,b as he,$ as We,a0 as je,a1 as Ke,a2 as Xe,a3 as Ye,a4 as qe,a5 as Ge,g as Je,h as Qe,i as Ze,a6 as xe,a7 as et}from"./index-d4259e6b.js";import{t as ie,E as _e}from"./el-image-viewer-89048ea9.js";import{u as tt}from"./index-32ec0f81.js";const st=ce({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),at={change:(r,S)=>[r,S].every(Me)},ye=Symbol("carouselContextKey"),ue=300,nt=(r,S,u)=>{const{children:o,addChild:b,removeChild:g}=tt(de(),"ElCarouselItem"),n=w(-1),d=w(null),h=w(!1),p=w(),M=z(()=>r.arrow!=="never"&&!e(l)),E=z(()=>o.value.some(s=>s.props.label.toString().length>0)),C=z(()=>r.type==="card"),l=z(()=>r.direction==="vertical"),N=ie(s=>{t(s)},ue,{trailing:!0}),v=ie(s=>{D(s)},ue);function I(){d.value&&(clearInterval(d.value),d.value=null)}function T(){r.interval<=0||!r.autoplay||d.value||(d.value=setInterval(()=>V(),r.interval))}const V=()=>{n.value<o.value.length-1?n.value=n.value+1:r.loop&&(n.value=0)};function t(s){if(Be(s)){const U=o.value.filter(Y=>Y.props.name===s);U.length>0&&(s=o.value.indexOf(U[0]))}if(s=Number(s),Number.isNaN(s)||s!==Math.floor(s))return;const y=o.value.length,H=n.value;s<0?n.value=r.loop?y-1:0:s>=y?n.value=r.loop?0:y-1:n.value=s,H===n.value&&i(H),se()}function i(s){o.value.forEach((y,H)=>{y.translateItem(H,n.value,s)})}function a(s,y){var H,U,Y,ae;const F=e(o),ne=F.length;if(ne===0||!s.states.inStage)return!1;const Ie=y+1,be=y-1,oe=ne-1,we=F[oe].states.active,ke=F[0].states.active,Ee=(U=(H=F[Ie])==null?void 0:H.states)==null?void 0:U.active,Se=(ae=(Y=F[be])==null?void 0:Y.states)==null?void 0:ae.active;return y===oe&&ke||Ee?"left":y===0&&we||Se?"right":!1}function f(){h.value=!0,r.pauseOnHover&&I()}function B(){h.value=!1,T()}function m(s){e(l)||o.value.forEach((y,H)=>{s===a(y,H)&&(y.states.hover=!0)})}function c(){e(l)||o.value.forEach(s=>{s.states.hover=!1})}function _(s){n.value=s}function D(s){r.trigger==="hover"&&s!==n.value&&(n.value=s)}function Q(){t(n.value-1)}function Ce(){t(n.value+1)}function se(){I(),T()}W(()=>n.value,(s,y)=>{i(y),y>-1&&S("change",s,y)}),W(()=>r.autoplay,s=>{s?T():I()}),W(()=>r.loop,()=>{t(n.value)}),W(()=>r.interval,()=>{se()}),W(()=>o.value,()=>{o.value.length>0&&t(r.initialIndex)});const Z=$e();return x(()=>{Z.value=Le(p.value,()=>{i()}),T()}),Ne(()=>{I(),p.value&&Z.value&&Z.value.stop()}),Te(ye,{root:p,isCardType:C,isVertical:l,items:o,loop:r.loop,addItem:b,removeItem:g,setActiveItem:t}),{root:p,activeIndex:n,arrowDisplay:M,hasLabel:E,hover:h,isCardType:C,items:o,handleButtonEnter:m,handleButtonLeave:c,handleIndicatorClick:_,handleMouseEnter:f,handleMouseLeave:B,setActiveItem:t,prev:Q,next:Ce,throttledArrowClick:N,throttledIndicatorHover:v}},ot=["onMouseenter","onClick"],lt={key:0},rt="ElCarousel",it=R({name:rt}),ut=R({...it,props:st,emits:at,setup(r,{expose:S,emit:u}){const o=r,{root:b,activeIndex:g,arrowDisplay:n,hasLabel:d,hover:h,isCardType:p,items:M,handleButtonEnter:E,handleButtonLeave:C,handleIndicatorClick:l,handleMouseEnter:N,handleMouseLeave:v,setActiveItem:I,prev:T,next:V,throttledArrowClick:t,throttledIndicatorHover:i}=nt(o,u),a=ve("carousel"),f=z(()=>{const m=[a.b(),a.m(o.direction)];return e(p)&&m.push(a.m("card")),m}),B=z(()=>{const m=[a.e("indicators"),a.em("indicators",o.direction)];return e(d)&&m.push(a.em("indicators","labels")),(o.indicatorPosition==="outside"||e(p))&&m.push(a.em("indicators","outside")),m});return S({setActiveItem:I,prev:T,next:V}),(m,c)=>(k(),P("div",{ref_key:"root",ref:b,class:O(e(f)),onMouseenter:c[6]||(c[6]=j((..._)=>e(N)&&e(N)(..._),["stop"])),onMouseleave:c[7]||(c[7]=j((..._)=>e(v)&&e(v)(..._),["stop"]))},[A("div",{class:O(e(a).e("container")),style:me({height:m.height})},[e(n)?(k(),X(re,{key:0,name:"carousel-arrow-left",persisted:""},{default:$(()=>[G(A("button",{type:"button",class:O([e(a).e("arrow"),e(a).em("arrow","left")]),onMouseenter:c[0]||(c[0]=_=>e(E)("left")),onMouseleave:c[1]||(c[1]=(..._)=>e(C)&&e(C)(..._)),onClick:c[2]||(c[2]=j(_=>e(t)(e(g)-1),["stop"]))},[L(e(le),null,{default:$(()=>[L(e(Pe))]),_:1})],34),[[J,(m.arrow==="always"||e(h))&&(o.loop||e(g)>0)]])]),_:1})):K("v-if",!0),e(n)?(k(),X(re,{key:1,name:"carousel-arrow-right",persisted:""},{default:$(()=>[G(A("button",{type:"button",class:O([e(a).e("arrow"),e(a).em("arrow","right")]),onMouseenter:c[3]||(c[3]=_=>e(E)("right")),onMouseleave:c[4]||(c[4]=(..._)=>e(C)&&e(C)(..._)),onClick:c[5]||(c[5]=j(_=>e(t)(e(g)+1),["stop"]))},[L(e(le),null,{default:$(()=>[L(e(Ae))]),_:1})],34),[[J,(m.arrow==="always"||e(h))&&(o.loop||e(g)<e(M).length-1)]])]),_:1})):K("v-if",!0),fe(m.$slots,"default")],6),m.indicatorPosition!=="none"?(k(),P("ul",{key:0,class:O(e(B))},[(k(!0),P(ee,null,te(e(M),(_,D)=>(k(),P("li",{key:D,class:O([e(a).e("indicator"),e(a).em("indicator",m.direction),e(a).is("active",D===e(g))]),onMouseenter:Q=>e(i)(D),onClick:j(Q=>e(l)(D),["stop"])},[A("button",{class:O(e(a).e("button"))},[e(d)?(k(),P("span",lt,q(_.props.label),1)):K("v-if",!0)],2)],42,ot))),128))],2)):K("v-if",!0)],34))}});var ct=pe(ut,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const dt=ce({name:{type:String,default:""},label:{type:[String,Number],default:""}}),vt=(r,S)=>{const u=He(ye),o=de(),b=.83,g=w(!1),n=w(0),d=w(1),h=w(!1),p=w(!1),M=w(!1),E=w(!1),{isCardType:C,isVertical:l}=u;function N(t,i,a){const f=a-1,B=i-1,m=i+1,c=a/2;return i===0&&t===f?-1:i===f&&t===0?a:t<B&&i-t>=c?a+1:t>m&&t-i>=c?-2:t}function v(t,i){var a;const f=((a=u.root.value)==null?void 0:a.offsetWidth)||0;return M.value?f*((2-b)*(t-i)+1)/4:t<i?-(1+b)*f/4:(3+b)*f/4}function I(t,i,a){const f=u.root.value;return f?((a?f.offsetHeight:f.offsetWidth)||0)*(t-i):0}const T=(t,i,a)=>{var f;const B=e(C),m=(f=u.items.value.length)!=null?f:Number.NaN,c=t===i;!B&&!ze(a)&&(E.value=c||t===a),!c&&m>2&&u.loop&&(t=N(t,i,m));const _=e(l);h.value=c,B?(M.value=Math.round(Math.abs(t-i))<=1,n.value=v(t,i),d.value=e(h)?1:b):n.value=I(t,i,_),p.value=!0};function V(){if(u&&e(C)){const t=u.items.value.findIndex(({uid:i})=>i===o.uid);u.setActiveItem(t)}}return x(()=>{u.addItem({props:r,states:Oe({hover:g,translate:n,scale:d,active:h,ready:p,inStage:M,animating:E}),uid:o.uid,translateItem:T})}),Ve(()=>{u.removeItem(o.uid)}),{active:h,animating:E,hover:g,inStage:M,isVertical:l,translate:n,isCardType:C,scale:d,ready:p,handleItemClick:V}},ft=R({name:"ElCarouselItem"}),mt=R({...ft,props:dt,setup(r){const S=r,u=ve("carousel"),{active:o,animating:b,hover:g,inStage:n,isVertical:d,translate:h,isCardType:p,scale:M,ready:E,handleItemClick:C}=vt(S),l=z(()=>{const v=`${`translate${e(d)?"Y":"X"}`}(${e(h)}px)`,I=`scale(${e(M)})`;return{transform:[v,I].join(" ")}});return(N,v)=>G((k(),P("div",{class:O([e(u).e("item"),e(u).is("active",e(o)),e(u).is("in-stage",e(n)),e(u).is("hover",e(g)),e(u).is("animating",e(b)),{[e(u).em("item","card")]:e(p)}]),style:me(e(l)),onClick:v[0]||(v[0]=(...I)=>e(C)&&e(C)(...I))},[e(p)?G((k(),P("div",{key:0,class:O(e(u).e("mask"))},null,2)),[[J,!e(o)]]):K("v-if",!0),fe(N.$slots,"default")],6)),[[J,e(E)]])}});var ge=pe(mt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const pt=De(ct,{CarouselItem:ge}),ht=Re(ge);const _t={class:"mb-3 text-xl"},yt={style:{background:"rgba(128,128,128,0.2)",color:"white",width:"96%",position:"absolute","z-index":"10"}},gt={class:"float-right"},Ct=A("i",{class:"el-icon-headset",style:{"margin-right":"5px"}},null,-1),It=["onClick"],bt=R({__name:"MusicList",props:{list:Array},emits:["handleClick"],setup(r){const S=Ue();return(u,o)=>{const b=Fe,g=_e,n=We;return k(),P("div",null,[L(b,{class:"border-b-2 border-b-gray-200"},{default:$(()=>[A("p",_t,q(e(S).title),1)]),_:1}),L(b,{gutter:10},{default:$(()=>[(k(!0),P(ee,null,te(r.list,(d,h)=>(k(),X(n,{key:h,span:4,style:{"margin-top":"20px",position:"relative"}},{default:$(()=>[A("div",yt,[A("div",gt,[Ct,he(" "+q(d.playCount>=1e4?`${(d.playCount/1e4).toFixed(0)}万`:d.playCount),1)])]),A("div",null,[L(g,{src:d.coverImgUrl,style:{"box-shadow":"0 0 2px 2px gray","border-radius":"10px",cursor:"pointer"},onClick:p=>u.$emit("handleClick",d.id)},null,8,["src","onClick"])]),A("h1",{style:{cursor:"pointer"},onClick:p=>u.$emit("handleClick",d.id)},q(d.name),9,It)]),_:2},1024))),128))]),_:1})])}}}),St=R({__name:"index",setup(r){const S=w(null),u=async()=>{const l=await Ke();S.value=l.banners},o=w(null),b=async()=>{const l=await Xe();o.value=l.playlists},g=w(null),n=async()=>{const l=await Ye();g.value=l.result},d=w(null),h=async()=>{const l=await qe();d.value=l.result};x(async()=>{u(),b(),n(),h()});const p=Ge(),M=l=>{console.log("toSongListPage",l),p.push(`/cd/${l}`)},E=je(),C=async l=>{if(l.targetType===10)p.push(`/album/${l.targetId}`);else if(l.targetType===1){const v=(await xe(l.targetId)).songs[0],I={name:v.name,dt:v.duration||v.dt,al:v.album||v.al,ar:v.artists||v.ar,id:v.id};E.addToPlayList(I),E.playByIndex(E.playList.length-1)}};return(l,N)=>{const v=_e,I=et,T=ht,V=pt,t=Je,i=Qe,a=Ze;return k(),X(a,null,{default:$(()=>[L(t,{class:"h-full"},{default:$(()=>[L(V,{type:"card",class:"h-full"},{default:$(()=>[(k(!0),P(ee,null,te(S.value,f=>(k(),X(T,{key:f.encodeId,class:"h-full"},{default:$(()=>[L(v,{class:"h-full",fit:"contain",src:f.imageUrl,onClick:B=>C(f)},null,8,["src","onClick"]),L(I,{class:"absolute bottom-14 right-1"},{default:$(()=>[he(" 独家 ")]),_:1})]),_:2},1024))),128))]),_:1})]),_:1}),L(i,null,{default:$(()=>[L(bt,{list:o.value,title:"推荐歌单",onHandleClick:M},null,8,["list"])]),_:1})]),_:1})}}});export{St as default};
