import{d as E,l as v,a8 as C,n as L,m as k,aJ as U,o as r,c as f,w as t,a as s,B as e,b as d,P as o,A as V,J as z,u,aH as H,ac as B,e as J,a7 as M,aK as R,g as j,h as q,i as F,aL as K,a6 as G}from"./index-d4259e6b.js";import{E as O,a as Q}from"./el-tab-pane-ea3463fe.js";import{_ as W,c as X,d as Y,s as Z}from"./AsyncComment.vue_vue_type_script_setup_true_lang-f34dbc19.js";import"./index-32ec0f81.js";const ee=["src"],ae={class:"flex-1"},te={class:"flex items-center"},se={class:"font-medium text-lg ml-3"},le={key:0,class:"flex items-center mt-2 mb-8"},ne=["src"],oe={class:"flex mb-8"},ce=e("span",null,"标签：",-1),ie=e("span",null,"简介：",-1),ue={class:"align-middle inline-block w-80 whitespace-nowrap overflow-hidden text-ellipsis"},re={class:"w-24"},_e=e("p",null,"歌曲数 ｜ 播放量",-1),de=e("div",null," loading... ",-1),me=E({__name:"AsyncCDView",async setup(D){let l,i;const m=J(),g=async c=>(await K(c)).playlist,a=v(null);a.value=([l,i]=C(()=>g(m.params.id)),l=await l,i(),l),L(()=>m.params.id,async()=>{a.value=await g(m.params.id),_.value=await y(h.value)});const h=k(()=>a.value.trackIds.reduce((c,n)=>c+=`,${n.id}`,"").slice(1)),y=async c=>(await G(c)).songs,_=v(null);_.value=([l,i]=C(()=>y(h.value)),l=await l,i(),l);const w=v("PlayList"),A=k(()=>a.value.tags.join("/")),{playAll:I}=U();return(c,n)=>{const T=M,p=R,N=j,b=O,P=Q,S=q,$=F;return r(),f($,{class:"py-9"},{default:t(()=>[s(N,{class:"flex h-56"},{default:t(()=>[e("img",{class:"w-56 h-56 mr-3",src:a.value.coverImgUrl,alt:""},null,8,ee),e("div",ae,[e("div",te,[s(T,{class:"bg-white",type:"danger"},{default:t(()=>[d(" 精品歌单 ")]),_:1}),e("h1",se,o(a.value.name),1)]),a.value.creator?(r(),V("div",le,[e("img",{class:"h-8 w-8 rounded-full mr-3",src:a.value.creator.avatarUrl,alt:""},null,8,ne),e("span",null,o(a.value.creator.nickname)+"-"+o(new Date(a.value.createTime).toLocaleString().replaceAll("/","-").slice(0,10))+" 创建",1)])):z("",!0),e("div",oe,[s(p,{icon:u(X),onClick:n[0]||(n[0]=x=>u(I)(_.value))},{default:t(()=>[d(" 播放全部 ")]),_:1},8,["icon"]),s(p,{icon:u(Y)},{default:t(()=>[d(" 收藏("+o(a.value.subscribedCount)+") ",1)]),_:1},8,["icon"]),s(p,{icon:u(Z)},{default:t(()=>[d(" 分享 ")]),_:1},8,["icon"])]),e("div",null,[e("p",null,[ce,e("span",null,o(u(A)),1)]),e("p",null,[ie,e("span",ue,o(a.value.description),1)])])]),e("div",re,[e("div",null,[_e,e("p",null,o(a.value.trackCount)+" | "+o((a.value.playCount/1e4).toFixed(0)),1)])])]),_:1}),s(S,null,{default:t(()=>[s(P,{modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=x=>w.value=x),type:"card",class:"demo-tabs"},{default:t(()=>[s(b,{lazy:"",label:"歌曲列表",name:"PlayList"},{default:t(()=>[s(H,{songs:_.value,"play-type":"row"},null,8,["songs"])]),_:1}),s(b,{lazy:"",label:"评论",name:"Comment"},{default:t(()=>[(r(),f(B,null,{fallback:t(()=>[de]),default:t(()=>[s(W)]),_:1}))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),pe=e("div",null," loading... ",-1),ye=E({__name:"index",setup(D){return(l,i)=>(r(),V("div",null,[(r(),f(B,null,{fallback:t(()=>[pe]),default:t(()=>[s(me)]),_:1}))]))}});export{ye as default};
